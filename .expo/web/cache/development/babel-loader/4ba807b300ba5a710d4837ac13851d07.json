{"ast":null,"code":"function DOMParser(options) {\n  this.options = options || {\n    locator: {}\n  };\n}\n\nDOMParser.prototype.parseFromString = function (source, mimeType) {\n  var options = this.options;\n  var sax = new XMLReader();\n  var domBuilder = options.domBuilder || new DOMHandler();\n  var errorHandler = options.errorHandler;\n  var locator = options.locator;\n  var defaultNSMap = options.xmlns || {};\n\n  if (typeof require == 'function') {\n    var entityMap = require(\"./entity-map\").EntityMap;\n  }\n\n  if (locator) {\n    domBuilder.setDocumentLocator(locator);\n  }\n\n  sax.errorHandler = buildErrorHandler(errorHandler, domBuilder, locator);\n  sax.domBuilder = options.domBuilder || domBuilder;\n\n  if (/\\/x?html?$/.test(mimeType)) {\n    entityMap.nbsp = '\\xa0';\n    entityMap.copy = '\\xa9';\n    defaultNSMap[''] = 'http://www.w3.org/1999/xhtml';\n  }\n\n  defaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\n\n  if (source) {\n    sax.parse(source, defaultNSMap, entityMap);\n  } else {\n    sax.errorHandler.error(\"invalid document source\");\n  }\n\n  return domBuilder.document;\n};\n\nfunction buildErrorHandler(errorImpl, domBuilder, locator) {\n  if (!errorImpl) {\n    if (domBuilder instanceof DOMHandler) {\n      return domBuilder;\n    }\n\n    errorImpl = domBuilder;\n  }\n\n  var errorHandler = {};\n  var isCallback = errorImpl instanceof Function;\n  locator = locator || {};\n\n  function build(key) {\n    var fn = errorImpl[key];\n\n    if (!fn && isCallback) {\n      fn = errorImpl.length == 2 ? function (msg) {\n        errorImpl(key, msg);\n      } : errorImpl;\n    }\n\n    errorHandler[key] = fn && function (msg) {\n      fn('[xmldom ' + key + ']\\t' + msg + _locator(locator));\n    } || function () {};\n  }\n\n  build('warning');\n  build('error');\n  build('fatalError');\n  return errorHandler;\n}\n\nfunction DOMHandler() {\n  this.cdata = false;\n}\n\nfunction position(locator, node) {\n  node.lineNumber = locator.lineNumber;\n  node.columnNumber = locator.columnNumber;\n}\n\nDOMHandler.prototype = {\n  startDocument: function startDocument() {\n    this.document = new DOMImplementation().createDocument(null, null, null);\n\n    if (this.locator) {\n      this.document.documentURI = this.locator.systemId;\n    }\n  },\n  startElement: function startElement(namespaceURI, localName, qName, attrs) {\n    var doc = this.document;\n    var el = doc.createElementNS(namespaceURI, qName || localName);\n    var len = attrs.length;\n    appendElement(this, el);\n    this.currentElement = el;\n    this.locator && position(this.locator, el);\n\n    for (var i = 0; i < len; i++) {\n      var namespaceURI = attrs.getURI(i);\n      var value = attrs.getValue(i);\n      var qName = attrs.getQName(i);\n      var attr = doc.createAttributeNS(namespaceURI, qName);\n\n      if (attr.getOffset) {\n        position(attr.getOffset(1), attr);\n      }\n\n      attr.value = attr.nodeValue = value;\n      el.setAttributeNode(attr);\n    }\n  },\n  endElement: function endElement(namespaceURI, localName, qName) {\n    var current = this.currentElement;\n    var tagName = current.tagName;\n    this.currentElement = current.parentNode;\n  },\n  startPrefixMapping: function startPrefixMapping(prefix, uri) {},\n  endPrefixMapping: function endPrefixMapping(prefix) {},\n  processingInstruction: function processingInstruction(target, data) {\n    var ins = this.document.createProcessingInstruction(target, data);\n    this.locator && position(this.locator, ins);\n    appendElement(this, ins);\n  },\n  ignorableWhitespace: function ignorableWhitespace(ch, start, length) {},\n  characters: function characters(chars, start, length) {\n    chars = _toString.apply(this, arguments);\n\n    if (this.currentElement && chars) {\n      if (this.cdata) {\n        var charNode = this.document.createCDATASection(chars);\n        this.currentElement.appendChild(charNode);\n      } else {\n        var charNode = this.document.createTextNode(chars);\n        this.currentElement.appendChild(charNode);\n      }\n\n      this.locator && position(this.locator, charNode);\n    }\n  },\n  skippedEntity: function skippedEntity(name) {},\n  endDocument: function endDocument() {\n    this.document.normalize();\n  },\n  setDocumentLocator: function setDocumentLocator(locator) {\n    if (this.locator = locator) {\n      locator.lineNumber = 0;\n    }\n  },\n  comment: function comment(chars, start, length) {\n    chars = _toString.apply(this, arguments);\n    var comm = this.document.createComment(chars);\n    this.locator && position(this.locator, comm);\n    appendElement(this, comm);\n  },\n  startCDATA: function startCDATA() {\n    this.cdata = true;\n  },\n  endCDATA: function endCDATA() {\n    this.cdata = false;\n  },\n  startDTD: function startDTD(name, publicId, systemId) {\n    var impl = this.document.implementation;\n\n    if (impl && impl.createDocumentType) {\n      var dt = impl.createDocumentType(name, publicId, systemId);\n      this.locator && position(this.locator, dt);\n      appendElement(this, dt);\n    }\n  },\n  warning: function warning(error) {\n    console.warn('[xmldom warning]\\t' + error, _locator(this.locator));\n  },\n  error: function error(_error) {\n    console.error('[xmldom error]\\t' + _error, _locator(this.locator));\n  },\n  fatalError: function fatalError(error) {\n    console.error('[xmldom fatalError]\\t' + error, _locator(this.locator));\n    throw error;\n  }\n};\n\nfunction _locator(l) {\n  if (l) {\n    return '\\n@' + (l.systemId || '') + '#[line:' + l.lineNumber + ',col:' + l.columnNumber + ']';\n  }\n}\n\nfunction _toString(chars, start, length) {\n  if (typeof chars == 'string') {\n    return chars.substr(start, length);\n  } else {\n    if (chars.length >= start + length || start) {\n      return new java.lang.String(chars, start, length) + '';\n    }\n\n    return chars;\n  }\n}\n\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g, function (key) {\n  DOMHandler.prototype[key] = function () {\n    return null;\n  };\n});\n\nfunction appendElement(hander, node) {\n  if (!hander.currentElement) {\n    hander.document.appendChild(node);\n  } else {\n    hander.currentElement.appendChild(node);\n  }\n}\n\nif (typeof require == 'function') {\n  var XMLReader = require(\"./sax\").XMLReader;\n\n  var DOMImplementation = exports.DOMImplementation = require(\"./dom\").DOMImplementation;\n\n  exports.XMLSerializer = require(\"./dom\").XMLSerializer;\n  exports.DOMParser = DOMParser;\n}","map":{"version":3,"sources":["/Users/sunjin/Documents/CoWel-app-master/node_modules/react-native-html-parser/dom-parser.js"],"names":["DOMParser","options","locator","prototype","parseFromString","source","mimeType","sax","XMLReader","domBuilder","DOMHandler","errorHandler","defaultNSMap","xmlns","require","entityMap","EntityMap","setDocumentLocator","buildErrorHandler","test","nbsp","copy","xml","parse","error","document","errorImpl","isCallback","Function","build","key","fn","length","msg","_locator","cdata","position","node","lineNumber","columnNumber","startDocument","DOMImplementation","createDocument","documentURI","systemId","startElement","namespaceURI","localName","qName","attrs","doc","el","createElementNS","len","appendElement","currentElement","i","getURI","value","getValue","getQName","attr","createAttributeNS","getOffset","nodeValue","setAttributeNode","endElement","current","tagName","parentNode","startPrefixMapping","prefix","uri","endPrefixMapping","processingInstruction","target","data","ins","createProcessingInstruction","ignorableWhitespace","ch","start","characters","chars","_toString","apply","arguments","charNode","createCDATASection","appendChild","createTextNode","skippedEntity","name","endDocument","normalize","comment","comm","createComment","startCDATA","endCDATA","startDTD","publicId","impl","implementation","createDocumentType","dt","warning","console","warn","fatalError","l","substr","java","lang","String","replace","hander","exports","XMLSerializer"],"mappings":"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","sourcesContent":["function DOMParser(options){\r\n\tthis.options = options ||{locator:{}};\r\n\r\n}\r\nDOMParser.prototype.parseFromString = function(source,mimeType){\r\n\tvar options = this.options;\r\n\tvar sax =  new XMLReader();\r\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\r\n\tvar errorHandler = options.errorHandler;\r\n\tvar locator = options.locator;\r\n\tvar defaultNSMap = options.xmlns||{};\r\n\tif(typeof require == 'function') {\r\n\t\tvar entityMap = require('./entity-map').EntityMap;\r\n\t}\r\n\tif(locator){\r\n\t\tdomBuilder.setDocumentLocator(locator)\r\n\t}\r\n\r\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\r\n\tsax.domBuilder = options.domBuilder || domBuilder;\r\n\tif(/\\/x?html?$/.test(mimeType)){\r\n\t\tentityMap.nbsp = '\\xa0';\r\n\t\tentityMap.copy = '\\xa9';\r\n\t\tdefaultNSMap['']= 'http://www.w3.org/1999/xhtml';\r\n\t}\r\n\tdefaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\r\n\tif(source){\r\n\t\tsax.parse(source,defaultNSMap,entityMap);\r\n\t}else{\r\n\t\tsax.errorHandler.error(\"invalid document source\");\r\n\t}\r\n\treturn domBuilder.document;\r\n}\r\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\r\n\tif(!errorImpl){\r\n\t\tif(domBuilder instanceof DOMHandler){\r\n\t\t\treturn domBuilder;\r\n\t\t}\r\n\t\terrorImpl = domBuilder ;\r\n\t}\r\n\tvar errorHandler = {}\r\n\tvar isCallback = errorImpl instanceof Function;\r\n\tlocator = locator||{}\r\n\tfunction build(key){\r\n\t\tvar fn = errorImpl[key];\r\n\t\tif(!fn && isCallback){\r\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\r\n\t\t}\r\n\t\terrorHandler[key] = fn && function(msg){\r\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\r\n\t\t}||function(){};\r\n\t}\r\n\tbuild('warning');\r\n\tbuild('error');\r\n\tbuild('fatalError');\r\n\treturn errorHandler;\r\n}\r\n\r\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\r\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler\r\n *\r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\r\nfunction DOMHandler() {\r\n    this.cdata = false;\r\n}\r\nfunction position(locator,node){\r\n\tnode.lineNumber = locator.lineNumber;\r\n\tnode.columnNumber = locator.columnNumber;\r\n}\r\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */\r\nDOMHandler.prototype = {\r\n\tstartDocument : function() {\r\n    \tthis.document = new DOMImplementation().createDocument(null, null, null);\r\n    \tif (this.locator) {\r\n        \tthis.document.documentURI = this.locator.systemId;\r\n    \t}\r\n\t},\r\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\r\n\t\tvar doc = this.document;\r\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\r\n\t    var len = attrs.length;\r\n\t    appendElement(this, el);\r\n\t    this.currentElement = el;\r\n\r\n\t\tthis.locator && position(this.locator,el)\r\n\t    for (var i = 0 ; i < len; i++) {\r\n\t        var namespaceURI = attrs.getURI(i);\r\n\t        var value = attrs.getValue(i);\r\n\t        var qName = attrs.getQName(i);\r\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\r\n\t\t\tif( attr.getOffset){\r\n\t\t\t\tposition(attr.getOffset(1),attr)\r\n\t\t\t}\r\n\t\t\tattr.value = attr.nodeValue = value;\r\n\t\t\tel.setAttributeNode(attr)\r\n\t    }\r\n\t},\r\n\tendElement:function(namespaceURI, localName, qName) {\r\n\t\tvar current = this.currentElement\r\n\t    var tagName = current.tagName;\r\n\t    this.currentElement = current.parentNode;\r\n\t},\r\n\tstartPrefixMapping:function(prefix, uri) {\r\n\t},\r\n\tendPrefixMapping:function(prefix) {\r\n\t},\r\n\tprocessingInstruction:function(target, data) {\r\n\t    var ins = this.document.createProcessingInstruction(target, data);\r\n\t    this.locator && position(this.locator,ins)\r\n\t    appendElement(this, ins);\r\n\t},\r\n\tignorableWhitespace:function(ch, start, length) {\r\n\t},\r\n\tcharacters:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t\t//console.log(chars)\r\n\t\tif(this.currentElement && chars){\r\n\t\t\tif (this.cdata) {\r\n\t\t\t\tvar charNode = this.document.createCDATASection(chars);\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t} else {\r\n\t\t\t\tvar charNode = this.document.createTextNode(chars);\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t}\r\n\t\t\tthis.locator && position(this.locator,charNode)\r\n\t\t}\r\n\t},\r\n\tskippedEntity:function(name) {\r\n\t},\r\n\tendDocument:function() {\r\n\t\tthis.document.normalize();\r\n\t},\r\n\tsetDocumentLocator:function (locator) {\r\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\r\n\t    \tlocator.lineNumber = 0;\r\n\t    }\r\n\t},\r\n\t//LexicalHandler\r\n\tcomment:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t    var comm = this.document.createComment(chars);\r\n\t    this.locator && position(this.locator,comm)\r\n\t    appendElement(this, comm);\r\n\t},\r\n\r\n\tstartCDATA:function() {\r\n\t    //used in characters() methods\r\n\t    this.cdata = true;\r\n\t},\r\n\tendCDATA:function() {\r\n\t    this.cdata = false;\r\n\t},\r\n\r\n\tstartDTD:function(name, publicId, systemId) {\r\n\t\tvar impl = this.document.implementation;\r\n\t    if (impl && impl.createDocumentType) {\r\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\r\n\t        this.locator && position(this.locator,dt)\r\n\t        appendElement(this, dt);\r\n\t    }\r\n\t},\r\n\t/**\r\n\t * @see org.xml.sax.ErrorHandler\r\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n\t */\r\n\twarning:function(error) {\r\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\r\n\t},\r\n\terror:function(error) {\r\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\r\n\t},\r\n\tfatalError:function(error) {\r\n\t\tconsole.error('[xmldom fatalError]\\t'+error,_locator(this.locator));\r\n\t    throw error;\r\n\t}\r\n}\r\nfunction _locator(l){\r\n\tif(l){\r\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\r\n\t}\r\n}\r\nfunction _toString(chars,start,length){\r\n\tif(typeof chars == 'string'){\r\n\t\treturn chars.substr(start,length)\r\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\r\n\t\tif(chars.length >= start+length || start){\r\n\t\t\treturn new java.lang.String(chars,start,length)+'';\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n}\r\n\r\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\r\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\r\n\tDOMHandler.prototype[key] = function(){return null}\r\n})\r\n\r\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\r\nfunction appendElement (hander,node) {\r\n    if (!hander.currentElement) {\r\n        hander.document.appendChild(node);\r\n    } else {\r\n        hander.currentElement.appendChild(node);\r\n    }\r\n}//appendChild and setAttributeNS are preformance key\r\n\r\nif(typeof require == 'function'){\r\n\tvar XMLReader = require('./sax').XMLReader;\r\n\tvar DOMImplementation = exports.DOMImplementation = require('./dom').DOMImplementation;\r\n\texports.XMLSerializer = require('./dom').XMLSerializer ;\r\n\texports.DOMParser = DOMParser;\r\n}\r\n"]},"metadata":{},"sourceType":"script"}